<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>AR.js – MP4 on Marker (Desktop‑Friendly)</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <!-- A‑Frame core + AR.js wrapper (bundles Three.js) -->
    <script src="https://cdn.jsdelivr.net/npm/aframe@1.5.0/dist/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ar.js@3.5.6/aframe/build/aframe-ar.js"></script>
    <style>body{margin:0;overflow:hidden}</style>
  </head>
  <body>
    <!-- Hidden video element.  Muted so autoplay works on desktop browsers. -->
    <video id="srcVid"
           src="./video/123.mp4"
           loop muted
           preload="auto"
           playsinline webkit-playsinline
           crossorigin="anonymous"
           style="display:none"></video>

    <a-scene embedded
             arjs="sourceType: webcam; debugUIEnabled: false;"
             vr-mode-ui="enabled: false"
             renderer="logarithmicDepthBuffer: true">

      <!-- Pattern marker.  Replace with your own .patt file. -->
      <a-marker type="pattern" url="pattern-marker.patt" emitevents="true">
        <!-- a-video is just a plane with the video texture already set up -->
        <!-- Width 1 unit; height matches 16:9 (0.5625).  Rotate −90° so it sits flush on the marker. -->
        <a-video src="#srcVid"
                 width="1"
                 height="0.5625"
                 rotation="-90 0 0">
        </a-video>
      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>

    <script>
      const vid    = document.getElementById('srcVid');
      const marker = document.querySelector('a-marker');

      // start playback once user grants camera permission (first markerFound)
      marker.addEventListener('markerFound', () => {
        if (vid.paused) vid.play();
      });

      // pause when marker out of view to save CPU
      marker.addEventListener('markerLost', () => vid.pause());
    </script>
  </body>
</html>
