<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>MP4-on-Marker AR</title>

  <!-- A-Frame + AR.js single bundle -->
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.4/aframe/build/aframe-ar-nft.js"></script>

  <style>
    /* keep the scene inside its own box so you can add UI around it */
    #ar-wrapper {width: 640px; margin: 0 auto;}
  </style>
</head>
<body>
<div id="ar-wrapper">

  <!-- hidden HTML video (must be muted for mobile autoplay) -->
  <video id="clip" src="./video/123.mp4"
         autoplay muted loop playsinline style="display:none"></video>

  <!-- single (not nested!) A-Frame scene -->
  <a-scene
      embedded
      vr-mode-ui="enabled: false"
      arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false">

    <!-- Hiro marker. Change to your own NFT/QR pattern if you like -->
    <a-marker preset="hiro">

      <!-- plane that shows the MP4 -->
      <a-video src="#clip"
               width="1.5"  height="0.85"
               rotation="-90 0 0"
               play-on-click>
      </a-video>

    </a-marker>

    <a-entity camera></a-entity>
  </a-scene>
</div>

<script>
/* 1️⃣  tiny helper so iOS/Safari starts playback after first tap */
AFRAME.registerComponent('play-on-click', {
  init() {
    const vid = document.querySelector('#clip');
    this.el.addEventListener('click', () => { if (vid.paused) vid.play(); });
  }
});
</script>
</body>
</html>
